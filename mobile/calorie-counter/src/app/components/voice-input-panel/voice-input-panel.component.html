<div class="chatgpt-input"
     [class.chatgpt-input--recording]="isRecording"
     [class.chatgpt-input--disabled]="isMicDisabled">

  <textarea
    class="chatgpt-input__textarea"
    cdkTextareaAutosize
    [cdkAutosizeMinRows]="minRows"
    [cdkAutosizeMaxRows]="maxRows"
    [placeholder]="placeholder"
    [formControl]="control">
  </textarea>

  <!-- Кнопка очистки -->
  <button *ngIf="hasValue"
          class="chatgpt-input__clear"
          mat-icon-button
          type="button"
          aria-label="Очистить"
          (click)="onClear($event)">
    <mat-icon>close</mat-icon>
  </button>

  <!-- Микрофон — фиксирован в правом нижнем углу контейнера -->
  <button type="button"
          class="chatgpt-input__mic"
          mat-icon-button
          [disabled]="isMicDisabled"
          [matTooltip]="idleHint"
          aria-label="Записать голос"
          (mousedown)="onPress($event)"
          (touchstart)="onPress($event)"
          (mouseup)="onRelease()"
          (mouseleave)="onRelease()"
          (touchend)="onRelease()"
          (touchcancel)="onRelease()">
    <mat-icon>{{ isRecording ? 'mic' : 'mic_none' }}</mat-icon>
  </button>
</div>

<!-- Подсказки под панелью -->
<div *ngIf="showHints" class="chatgpt-input__hints">
  <div class="chatgpt-input__hint" *ngIf="!isRecording">{{ idleHint }}</div>
  <div class="chatgpt-input__hint chatgpt-input__hint--recording" *ngIf="isRecording">
    {{ recordingHint }}
  </div>
</div>
